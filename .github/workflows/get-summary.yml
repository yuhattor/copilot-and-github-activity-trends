name: "Copilot usage trends against GitHub activity"

on:
  workflow_dispatch:
    inputs:
      slug_type:
        required: true
        type: choice
        description: Slug Type
        options: 
        - enterprise
        - organization
      slug_name:
        required: true
        description: Slug Name

jobs:
  CopilotTrend:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5 
        with:
          python-version: '3.9'
      - name: Install dependencies
        run: pip install -r requirements.txt
      - name: Run Python
        run: python main.py
        env:
          PAT: ${{ secrets.PAT }}
          SLUGTYPE: ${{ github.event.inputs.slug_type }}
          SLUGNAME: ${{ github.event.inputs.slug_name }}
      - name: Set the summary
        run: echo "$(cat summary.md)" >> $GITHUB_STEP_SUMMARY
